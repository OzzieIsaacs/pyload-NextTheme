{% extends 'Next/base.html' %}

{% block head %}
    <script type="text/javascript" src="/media/js/Next/admin.js"></script>
{% endblock %}


{% block title %}{{ _("Administrate") }} - {{ super() }} {% endblock %}
{% block subtitle %}{{ _("Administrate") }}{% endblock %}

{% block content %}
    <div class="btn-group">
    <button id="quit-pyload" class="btn btn-default" data-toggle="modal" data-target="#quit_box"><span class="glyphicon glyphicon-off"></span> {{_("Quit pyLoad")}}</button>
    <button id="restart-pyload" class="btn btn-default" data-toggle="modal" data-target="#restart_box"><span class="glyphicon glyphicon-repeat"></span> {{_("Restart pyLoad")}}</button>
</div>
    <br>
    <br>

    {{ _("To add user or change passwords use:") }} <b>python pyLoadCore.py -u</b><br>
    {{ _("Important: Admin user have always all permissions!") }}
<br>
<br>
    <form action="" method="POST">
        <table class="settable table" style="width:50%;">
            <thead>
            <tr>
            <th>
                {{ _("Name") }}
            </th>
            <th>
                {{ _("Change Password") }}
            </th>
            <th>
                {{ _("Admin") }}
            </th>
            <th>
                {{ _("Permissions") }}
            </th>
            </tr>
            </thead>

            {% for name, data in users.iteritems() %}
                <tr>
                    <td>{{ name }}</td>
                    <td><div class="change_password btn btn-default btn-xs" data-toggle="modal" data-target="#password_box" id="change_pw|{{name}}"><span class="glyphicon glyphicon-pencil"></span> {{ _("change") }}</div></td>
                    <td><input name="{{ name }}|admin" type="checkbox" {% if data.perms.admin %} checked="True" {% endif %}></td>
                    <td>
                        <select multiple="multiple" size="{{ permlist|length }}" name="{{ name }}|perms">
                            {% for perm in permlist %}
                            {% if data.perms|getitem(perm) %}
                                <option selected="selected">{{ perm }}</option>
                            {% else %}
                                <option>{{ perm }}</option>
                            {% endif %}
                            {% endfor %}
                        </select>
                    </td>
                </tr>
            {% endfor %}


        </table>

        <button class="btn btn-primary" type="submit">{{ _("Submit") }}</button>
    </form>
{% endblock %}
{% block hidden %}
{% endblock %}
